<div class="animated fadeIn">
  <div class="row">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-header">
          <strong>Submit Transaction</strong>
          <small>Required Data marked in <strong>bold</strong>.</small>
        </div>
        <div class="card-block">
          <div class="form-group row">
            <label class="col-md-3 form-control-label" for="text-input"><strong>Time of Transaction</strong></label>
            <div class="col-md-9">
              <input type="datetime-local" class="form-control" [min]="minDate" [(ngModel)]="myDate" (ngModelChange)="transactionFormValidate()">
              <span class="help-block">Enter the date and time the transaction occurred.</span>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-3 form-control-label" for="text-input"><strong>Amount</strong></label>
            <div class="col-md-9">
              <div class="input-group">
                <span class="input-group-addon"><i class="fa fa-gbp"></i></span>
                <input type="number" min="0.00" step="0.01" class="form-control" placeholder="0.00" [(ngModel)]="amount" (ngModelChange)="transactionFormValidate()">
              </div>
              <span class="help-block">Enter the amount spent, such as 5.35 for Â£5.35.</span>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-3 form-control-label" for="text-input"><strong>Organisation Name</strong></label>
            <div class="col-md-9">
              <input type="text" class="form-control" placeholder="Organisation Name" [(ngModel)]="submitOrg.name" (input)="organisationSearch($event)" (ngModelChange)="transactionFormValidate()">
              <span class="help-block">Enter the name of the organisation money was spent. Choose existing ones from below or if not found, enter the details below.</span>
            </div>
          </div>
          <org-table *ngIf="storeList != null" [orgList]="storeList" (onClick)="addStore($event)"></org-table>
          <div *ngIf="showAddStore">
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Organisation Street Name</strong></label>
              <div class="col-md-9">
                <input type="text" class="form-control" placeholder="Which Street?" [(ngModel)]="submitOrg.street_name" (ngModelChange)="transactionFormValidate()">
                <span class="help-block">Enter the street name where the organisation is located at.</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Organisation Town</strong></label>
              <div class="col-md-9">
                <input type="text" class="form-control" placeholder="Which Town?" [(ngModel)]="submitOrg.town" (ngModelChange)="transactionFormValidate()">
                <span class="help-block">Enter the name of the town where the organisation is located at.</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Organisation Postcode</strong></label>
              <div class="col-md-9">
                <input type="text" class="form-control" placeholder="Postcode if known" [(ngModel)]="submitOrg.postcode" (ngModelChange)="transactionFormValidate()">
                <span class="help-block">Enter the postcode where the organisation is located at.</span>
              </div>
            </div>
          </div>
          <div class="form-group row">
            <div class="col-md-9">
              <div [ngSwitch]="transactionFormStatus">
                <div *ngSwitchCase="'success'" class="alert alert-success" role="alert">
                  Submit Succeeded.
                </div>
                <div *ngSwitchCase="'send_failed'" class="alert alert-danger" role="alert">
                  {{transactionFormStatusError}}
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card-footer">
          <button type="submit" (click)="postTransaction()" [disabled]="transactionFormInvalid" class="btn btn-sm btn-primary"><i class="fa fa-dot-circle-o"></i> Submit</button>
        </div>
      </div>
      <div *ngIf="accountType == 'organisation'" class="card">
        <div class="card-header">
          <strong>Profile & Payroll Data</strong>
          <small>Required Data marked in <strong>bold</strong>.</small>
        </div>
        <form class="form-horizontal" [formGroup]="payrollForm" (ngSubmit)="onSubmitPayroll()">
          <div class="card-block">
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Period of entry month</strong></label>
              <div class="col-md-9">
                <input type="month" class="form-control" formControlName="entryperiod">
                <span class="help-block">Enter the month and year for this information.</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Total amount of Employees</strong></label>
              <div class="col-md-9">
                <input type="number" class="form-control" formControlName="employeeamount" placeholder="0">
                <span class="help-block">Enter the amount of employees the organisation has for the entry month.</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Total amount of local Employees</strong></label>
              <div class="col-md-9">
                <input type="number" class="form-control" formControlName="localemployeeamount" placeholder="0">
                <span class="help-block">Enter the amount of employees that live locally to the organisation for the entry month.</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Gross Payroll</strong></label>
              <div class="col-md-9">
                <div class="input-group">
                  <span class="input-group-addon"><i class="fa fa-gbp"></i></span>
                  <input type="number" min="0.00" step="0.01" class="form-control" formControlName="grosspayroll" placeholder="0.00">
                </div>
                <span class="help-block">Enter the Gross Payroll for the organisation for the entry month.</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Total Income Tax</strong></label>
              <div class="col-md-9">
                <div class="input-group">
                  <span class="input-group-addon"><i class="fa fa-gbp"></i></span>
                  <input type="number" min="0.00" step="0.01" class="form-control" formControlName="payrollincometax" placeholder="0.00">
                </div>
                <span class="help-block">Enter the organisation's total income tax for the entry month.</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Employees Total NI</strong></label>
              <div class="col-md-9">
                <div class="input-group">
                  <span class="input-group-addon"><i class="fa fa-gbp"></i></span>
                  <input type="number" min="0.00" step="0.01" class="form-control" formControlName="payrollemployeeni" placeholder="0.00">
                </div>
                <span class="help-block">Total of Employees National Insurance contributions for the entry month</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Employers Total NI</strong></label>
              <div class="col-md-9">
                <div class="input-group">
                  <span class="input-group-addon"><i class="fa fa-gbp"></i></span>
                  <input type="number" min="0.00" step="0.01" class="form-control" formControlName="payrollemployerni" placeholder="0.00">
                </div>
                <span class="help-block">Employers National Insurance contributions for the entry month</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Total Pensions</strong></label>
              <div class="col-md-9">
                <div class="input-group">
                  <span class="input-group-addon"><i class="fa fa-gbp"></i></span>
                  <input type="number" min="0.00" step="0.01" class="form-control" formControlName="payrolltotalpension" placeholder="0.00">
                </div>
                <span class="help-block">Total spent on employee pensions by the organisation for the entry month</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Total Other Benefits</strong></label>
              <div class="col-md-9">
                <div class="input-group">
                  <span class="input-group-addon"><i class="fa fa-gbp"></i></span>
                  <input type="number" min="0.00" step="0.01" class="form-control" formControlName="payrollotherbenefit" placeholder="0.00">
                </div>
                <span class="help-block">A total of other payments such as refunded fuel etc. for the entry month</span>
              </div>
            </div>
            <div class="form-group row">
              <div class="col-md-9">
                <div [ngSwitch]="payrollFormStatus">
                  <div *ngSwitchCase="'success'" class="alert alert-success" role="alert">
                    Submit Succeeded.
                  </div>
                  <div *ngSwitchCase="'send_failed'" class="alert alert-danger" role="alert">
                    Error received, please try again.
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <button type="submit" [disabled]="!payrollForm.valid" class="btn btn-sm btn-primary"><i class="fa fa-dot-circle-o"></i> Submit</button>
          </div>
        </form>
      </div>
      <div *ngIf="accountType == 'organisation'" class="card">
        <div class="card-header">
          <strong>Individual Supplier Data</strong>
          <small>Required Data marked in <strong>bold</strong>.</small>
        </div>
        <form class="form-horizontal" [formGroup]="singleSupplierForm" (ngSubmit)="onSubmitSingleSupplier()">
          <div class="card-block">
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Period of entry month</strong></label>
              <div class="col-md-9">
                <input type="month" class="form-control" formControlName="entryperiod">
                <span class="help-block">Enter the month and year for this information.</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Supplier Business Name</strong></label>
              <div class="col-md-9">
                <input type="text" class="form-control" formControlName="supplierbusinessname">
                <span class="help-block">Enter the business name of the supplier.</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Postcode</strong></label>
              <div class="col-md-9">
                <input type="text" class="form-control" formControlName="postcode">
                <span class="help-block">Enter the postcode where the supplier is located.</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Monthly Spend</strong></label>
              <div class="col-md-9">
                <div class="input-group">
                  <span class="input-group-addon"><i class="fa fa-gbp"></i></span>
                  <input type="number" min="0.00" step="0.01" class="form-control" formControlName="monthlyspend" placeholder="0.00">
                </div>
                <span class="help-block">Enter the monthly spend paid towards the supplier.</span>
              </div>
            </div>
            <div class="form-group row">
              <div class="col-md-9">
                <div [ngSwitch]="singleSupplierFormStatus">
                  <div *ngSwitchCase="'success'" class="alert alert-success" role="alert">
                    Submit Succeeded.
                  </div>
                  <div *ngSwitchCase="'send_failed'" class="alert alert-danger" role="alert">
                    Error received, please try again.
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <button type="submit" [disabled]="!singleSupplierForm.valid" class="btn btn-sm btn-primary"><i class="fa fa-dot-circle-o"></i> Submit</button>
          </div>
         </form>
      </div>
      <div *ngIf="accountType == 'organisation'" class="card">
        <div class="card-header">
          <strong>Individual Employee Data</strong>
          <small>Required Data marked in <strong>bold</strong>.</small>
        </div>
        <form class="form-horizontal" [formGroup]="employeeForm" (ngSubmit)="onSubmitEmployee()">
          <div class="card-block">
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Period of entry month</strong></label>
              <div class="col-md-9">
                <input type="month" class="form-control" formControlName="entryperiod">
                <span class="help-block">Enter the month and year for this information.</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Employee number</strong></label>
              <div class="col-md-9">
                <input type="number" class="form-control" formControlName="employeeno" placeholder="0">
                <span class="help-block">Used to identify employee anonymously</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Gross Wage</strong></label>
              <div class="col-md-9">
                <div class="input-group">
                  <span class="input-group-addon"><i class="fa fa-gbp"></i></span>
                  <input type="number" min="0.00" step="0.01" class="form-control" formControlName="employeegrosswage" placeholder="0.00">
                </div>
                <span class="help-block">Enter the gross wage of the employee for the entry month.</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Total Income Tax</strong></label>
              <div class="col-md-9">
                <div class="input-group">
                  <span class="input-group-addon"><i class="fa fa-gbp"></i></span>
                  <input type="number" min="0.00" step="0.01" class="form-control" formControlName="employeeincometax" placeholder="0.00">
                </div>
                <span class="help-block">Enter the total income tax of the employee for the entry month</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Total Employee NI</strong></label>
              <div class="col-md-9">
                <div class="input-group">
                  <span class="input-group-addon"><i class="fa fa-gbp"></i></span>
                  <input type="number" min="0.00" step="0.01" class="form-control" formControlName="employeeni" placeholder="0.00">
                </div>
                <span class="help-block">Individual Employees National Insurance Contributions for the entry month</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Employee's Pension</strong></label>
              <div class="col-md-9">
                <div class="input-group">
                  <span class="input-group-addon"><i class="fa fa-gbp"></i></span>
                  <input type="number" min="0.00" step="0.01" class="form-control" formControlName="employeepension" placeholder="0.00">
                </div>
                <span class="help-block">Individual Employees Pension contributions for the entry month</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-3 form-control-label" for="text-input"><strong>Total Employee Other Benefits</strong></label>
              <div class="col-md-9">
                <div class="input-group">
                  <span class="input-group-addon"><i class="fa fa-gbp"></i></span>
                  <input type="number" min="0.00" step="0.01" class="form-control" formControlName="employeeotherbenefit" placeholder="0.00">
                </div>
                <span class="help-block">A total of other payments such as refunded fuel etc. for the entry month</span>
              </div>
            </div>
            <div class="form-group row">
              <div class="col-md-9">
                <div [ngSwitch]="employeeFormStatus">
                  <div *ngSwitchCase="'success'" class="alert alert-success" role="alert">
                    Submit Succeeded.
                  </div>
                  <div *ngSwitchCase="'send_failed'" class="alert alert-danger" role="alert">
                    Error received, please try again.
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <button type="submit" [disabled]="!employeeForm.valid" class="btn btn-sm btn-primary"><i class="fa fa-dot-circle-o"></i> Submit</button>
          </div>
         </form>
      </div>
    </div>
  </div><!--/.row-->
</div>
